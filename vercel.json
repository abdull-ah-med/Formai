{
        "version": 2,
        "builds": [
                {
                        "src": "package.json",
                        "use": "@vercel/static-build",
                        "config": {
                                "distDir": "dist"
                        }
                },
                {
                        "src": "api/**/*.ts",
                        "use": "@vercel/node"
                }
        ],
        "rewrites": [
                { "source": "/api/health", "destination": "/api/health.ts" },
                {
                        "source": "/api/auth-login",
                        "destination": "/api/auth-login.ts"
                },
                {
                        "source": "/api/auth-register",
                        "destination": "/api/auth-register.ts"
                },
                {
                        "source": "/api/auth/logout",
                        "destination": "/api/auth/logout.ts"
                },
                {
                        "source": "/api/protected",
                        "destination": "/api/protected.ts"
                },
                { "source": "/api/(.*)", "destination": "/api/$1.ts" },
                { "source": "/(.*)", "destination": "/index.html" }
        ],
        "headers": [
                {
                        "source": "/(.*)",
                        "headers": [
                                {
                                        "key": "X-Content-Type-Options",
                                        "value": "nosniff"
                                },
                                { "key": "X-Frame-Options", "value": "DENY" },
                                {
                                        "key": "X-XSS-Protection",
                                        "value": "1; mode=block"
                                },
                                {
                                        "key": "Referrer-Policy",
                                        "value": "strict-origin-when-cross-origin"
                                },
                                {
                                        "key": "Permissions-Policy",
                                        "value": "camera=(), microphone=(), geolocation=(), interest-cohort=()"
                                },
                                {
                                        "key": "Strict-Transport-Security",
                                        "value": "max-age=63072000; includeSubDomains; preload"
                                }
                        ]
                }
        ]
}
